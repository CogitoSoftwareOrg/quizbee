/* View Transitions */
/* @media (prefers-reduced-motion: reduce) {
	::view-transition-old(root),
	::view-transition-new(root) {
		animation: none !important;
	}
} */

/* View transition только для page-root */
#page-root {
	view-transition-name: page;
	/* Оптимизация для анимаций */
	will-change: transform, opacity;
}

/* Оптимизация для мобильных устройств */
@media (max-width: 640px) {
	#page-root {
		/* Упрощаем анимации на мобильных для лучшей производительности */
		will-change: transform;
	}
}

::view-transition-old(root),
::view-transition-new(root) {
	animation: none;
}

/* Slide - оптимизирована для мобильных */
:root[data-vt='slide']::view-transition-old(page) {
	animation: vt-slide-out 0.3s cubic-bezier(0.2, 0.9, 0.1, 1) forwards;
}
:root[data-vt='slide']::view-transition-new(page) {
	animation: vt-slide-in 0.3s cubic-bezier(0.2, 0.9, 0.1, 1) forwards;
}
@keyframes vt-slide-out {
	to {
		transform: translateX(-2rem);
		opacity: 0;
		/* Убрали blur для лучшей производительности на мобильных */
	}
}
@keyframes vt-slide-in {
	from {
		transform: translateX(2rem);
		opacity: 0;
		/* Убрали blur для лучшей производительности на мобильных */
	}
	to {
		transform: none;
		opacity: 1;
	}
}

/* Zoom */
:root[data-vt='zoom']::view-transition-old(page) {
	animation: vt-zoom-out 0.35s cubic-bezier(0.2, 0.7, 0.1, 1) forwards;
}
:root[data-vt='zoom']::view-transition-new(page) {
	animation: vt-zoom-in 0.35s cubic-bezier(0.2, 0.7, 0.1, 1) forwards;
}
@keyframes vt-zoom-out {
	to {
		transform: scale(0.975);
		opacity: 0;
		filter: blur(3px) saturate(0.9);
	}
}
@keyframes vt-zoom-in {
	from {
		transform: scale(1.02);
		opacity: 0;
		filter: blur(4px) saturate(1.1);
	}
	to {
		transform: none;
		opacity: 1;
		filter: none;
	}
}

/* Blur */
:root[data-vt='blur']::view-transition-old(page) {
	animation: vt-blur-out 0.28s ease forwards;
}
:root[data-vt='blur']::view-transition-new(page) {
	animation: vt-blur-in 0.32s ease forwards;
}
@keyframes vt-blur-out {
	to {
		opacity: 0;
		filter: blur(8px);
	}
}
@keyframes vt-blur-in {
	from {
		opacity: 0;
		filter: blur(10px);
	}
	to {
		opacity: 1;
		filter: none;
	}
}

/* Parallax */
.page {
	view-transition-name: page;
}
.page-bg {
	view-transition-name: page-bg;
}

:root[data-vt='parallax']::view-transition-old(page) {
	animation: vt-par-content-out 0.5s ease both;
}
:root[data-vt='parallax']::view-transition-new(page) {
	animation: vt-par-content-in 0.5s ease both;
}
:root[data-vt='parallax']::view-transition-old(page-bg) {
	animation: vt-par-bg-out 0.6s ease both;
}
:root[data-vt='parallax']::view-transition-new(page-bg) {
	animation: vt-par-bg-in 0.6s ease both;
}

@keyframes vt-par-content-out {
	to {
		transform: translateY(10px);
		opacity: 0;
	}
}
@keyframes vt-par-content-in {
	from {
		transform: translateY(-10px);
		opacity: 0;
	}
	to {
		transform: none;
		opacity: 1;
	}
}
@keyframes vt-par-bg-out {
	to {
		transform: translateY(16px);
		opacity: 0;
		filter: blur(2px);
	}
}
@keyframes vt-par-bg-in {
	from {
		transform: translateY(-16px);
		opacity: 0;
		filter: blur(2px);
	}
	to {
		transform: none;
		opacity: 1;
		filter: none;
	}
}

/* Cover */
:root[data-vt='cover']::view-transition-old(page) {
	animation: vt-cover-out 0.42s cubic-bezier(0.22, 0.75, 0.1, 1) both;
}
:root[data-vt='cover']::view-transition-new(page) {
	animation: vt-cover-in 0.42s cubic-bezier(0.22, 0.75, 0.1, 1) both;
}

@keyframes vt-cover-out {
	40% {
		clip-path: inset(0 0 0 0 round 16px);
		opacity: 1;
	}
	100% {
		clip-path: inset(0 0 100% 0 round 16px);
		opacity: 0.35;
		filter: blur(2px);
	}
}
@keyframes vt-cover-in {
	from {
		clip-path: inset(100% 0 0 0 round 16px);
		opacity: 0;
		filter: blur(3px);
	}
	to {
		clip-path: inset(0 0 0 0 round 16px);
		opacity: 1;
		filter: none;
	}
}

/* Tilt */
:root[data-vt='tilt'] {
	perspective: 1200px;
}
:root[data-vt='tilt']::view-transition-old(page) {
	transform-style: preserve-3d;
	animation: vt-tilt-out 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) both;
}
:root[data-vt='tilt']::view-transition-new(page) {
	transform-style: preserve-3d;
	animation: vt-tilt-in 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) both;
}
@keyframes vt-tilt-out {
	to {
		transform: rotateX(6deg) translateY(8px) scale(0.985);
		opacity: 0;
		filter: blur(2px);
	}
}
@keyframes vt-tilt-in {
	from {
		transform: rotateX(-6deg) translateY(-8px) scale(1.01);
		opacity: 0;
		filter: blur(3px);
	}
	to {
		transform: none;
		opacity: 1;
		filter: none;
	}
}

/* Ken Burns */
:root[data-vt='kenburns']::view-transition-old(page) {
	animation: vt-kb-out 600ms cubic-bezier(0.2, 0.7, 0.1, 1) both;
}
:root[data-vt='kenburns']::view-transition-new(page) {
	animation: vt-kb-in 600ms cubic-bezier(0.2, 0.7, 0.1, 1) both;
}
@keyframes vt-kb-out {
	to {
		transform: scale(1.03) translateY(6px);
		opacity: 0;
		filter: blur(2px) saturate(0.95);
	}
}
@keyframes vt-kb-in {
	from {
		transform: scale(0.985) translateY(-6px);
		opacity: 0;
		filter: blur(3px) saturate(1.05);
	}
	to {
		transform: none;
		opacity: 1;
		filter: none;
	}
}

/* Spring */
:root[data-vt='spring']::view-transition-old(page) {
	animation: vt-spring-out 0.28s ease forwards;
}
:root[data-vt='spring']::view-transition-new(page) {
	animation: vt-spring-in 520ms cubic-bezier(0.22, 1.3, 0.32, 1) both;
}
@keyframes vt-spring-out {
	to {
		opacity: 0;
		transform: translateY(8px) scale(0.995);
		filter: blur(1px);
	}
}
@keyframes vt-spring-in {
	0% {
		opacity: 0;
		transform: translateY(16px) scale(0.98);
		filter: blur(3px);
	}
	60% {
		opacity: 1;
		transform: translateY(-6px) scale(1.005);
		filter: none;
	}
	100% {
		transform: none;
	}
}
