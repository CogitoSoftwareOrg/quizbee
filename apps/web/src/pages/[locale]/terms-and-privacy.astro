---
import Root from "@/layouts/Root.astro";
import { getCollection } from "astro:content";

export const getStaticPaths = async () => {
  const entries = await getCollection("pages");
  const filteredEntries = entries.filter((entry) => entry.id.includes("terms-and-privacy"));
  const objs = filteredEntries.map((entry) => {
   const locale = entry.id.split("/")[0];
   return {
    params: {
      locale,
    },
    props: {
      data: entry.data,
    },
   }
  });
  return objs;
}

const { data } = Astro.props;
---

<Root title={data.title} active="home">
  <div class="max-w-4xl mx-auto px-4 py-16">
    <!-- Header -->
    <header class="mb-12 text-center">
      <h1 class="text-4xl lg:text-5xl font-bold mb-4">{data.title}</h1>
      <p class="text-base-content/60">
        Last Updated: {data.lastUpdated}
      </p>
    </header>

    <!-- Sections -->
    {
      data.sections.map((section) => (
        <section class="mb-16">
          <!-- Section Heading -->
          <h2 class="text-3xl font-bold mb-6 text-primary border-b-2 border-primary pb-2">
            {section.heading}
          </h2>

          <!-- Section Content -->
          <p class="text-lg text-base-content/80 mb-8 leading-relaxed">
            {section.content}
          </p>

          <!-- Subsections -->
          {section.subsections && (
            <div class="space-y-8">
              {section.subsections.map((subsection) => (
                <div class="pl-6 border-l-4 border-base-300">
                  <h3 class="text-xl font-bold mb-3 text-base-content">
                    {subsection.subheading}
                  </h3>
                  <p class="text-base text-base-content/70 leading-relaxed">
                    {subsection.content}
                  </p>
                </div>
              ))}
            </div>
          )}
        </section>
      ))
    }

    <!-- Footer -->
    <footer class="mt-16 pt-8 border-t border-base-200 text-center">
      <p class="text-base-content/60">
        If you have any questions, please contact us at{" "}
        <a href="mailto:support@quizbee.com" class="link link-primary">
          cogitoteamdev@gmail.com
        </a>
      </p>
    </footer>
  </div>
</Root>
