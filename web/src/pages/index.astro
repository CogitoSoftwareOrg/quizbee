---
import Root from "@/layouts/Root.astro";
import Hero from "@/components/sections/Hero.astro";
import Pains from "@/components/sections/Pains.astro";
import Features from "@/components/sections/Features.astro";
import HowItWorks from "@/components/sections/HowItWorks.astro";
import Products from "@/components/sections/Products.astro";
import Testimonials from "@/components/sections/Testimonials.astro";
import Pricing from "@/components/sections/Pricing.astro";
import FAQ from "@/components/sections/FAQ.astro";
import CTA from "@/components/sections/CTA.astro";

import { extractPrIdFromCoolifyUrl } from "@/lib/pb";

const coolify = import.meta.env.COOLIFY_URL;
let appUrl = import.meta.env.PUBLIC_APP_URL;
if (import.meta.env.PUBLIC_ENV === "preview" && coolify) {
  const prId = extractPrIdFromCoolifyUrl(coolify);
  appUrl = appUrl.replace("https://", `https://${prId}-`);
}

const content = {
  hero: {
    title: "Transform Your Study Materials into Interactive Quizzes",
    description:
      "QuizBee turns your documents into engaging, AI-powered quizzes. Study smarter, not harder, with personalized learning that adapts to your needs.",
    buttonText: "Start Learning for Free",
    image: "/bee_final.svg",
  },
  pains: {
    title: "Struggling to Stay Engaged While Studying?",
    items: [
      {
        title: "Passive Reading is Ineffective",
        description:
          "Simply reading materials doesn't help you retain information. You need active engagement to truly learn.",
        icon: "bed",
      },
      {
        title: "Generic Tests Don't Match Your Materials",
        description:
          "Pre-made quizzes rarely align with your specific study content, leaving gaps in your preparation.",
        icon: "book-open",
      },
      {
        title: "No Feedback When You're Stuck",
        description:
          "Traditional study methods leave you alone when you need help understanding difficult concepts.",
        icon: "circle-help",
      },
      {
        title: "Hard to Track Real Progress",
        description:
          "Without adaptive difficulty, you can't tell if you're truly mastering the material or just memorizing.",
        icon: "chart-no-axes-combined",
      },
    ],
  },
  features: {
    title: "Powerful Features for Smarter Learning",
    subtitle: "What Makes QuizBee Special",
    items: [
      {
        title: "AI-Generated Quizzes",
        description:
          "Upload your study materials and instantly get customized quizzes tailored to your content. PDFs, documents, notes - we handle it all.",
        icon: "bot",
        impact: {
          metric: "Quiz Creation",
          value: "30",
          unit: "seconds",
        },
      },
      {
        title: "Dynamic Difficulty Adjustment",
        description:
          "Control the difficulty in real-time as you take quizzes. Too easy? Bump it up. Too hard? Dial it down. The quiz adapts to your learning pace.",
        icon: "sliders-horizontal",
        impact: {
          metric: "Retention Boost",
          value: "3x",
          unit: "better",
        },
      },
      {
        title: "AI Tutor Conversations",
        description:
          "After each question, chat with an AI tutor that knows your materials. Get explanations, clarifications, and deeper insights instantly.",
        icon: "message-circle",
        impact: {
          metric: "Understanding",
          value: "100%",
          unit: "clarity",
        },
      },
      {
        title: "Topic Refinement",
        description:
          "Adjust the focus of your quiz mid-session. Want to drill deeper into a specific topic? Just ask, and the quiz adapts.",
        icon: "target",
      },
      {
        title: "Progress Tracking",
        description:
          "Monitor your performance over time. See which topics you've mastered and which need more attention.",
        icon: "trending-up",
      },
    ],
    stats: {
      total: "10,000+",
      label: "Quizzes Generated Daily",
      description:
        "Join thousands of students and professionals using QuizBee to master their materials",
    },
  },
  howItWorks: {
    title: "Get Started in 4 Simple Steps",
    subtitle: "How QuizBee Works",
    steps: [
      {
        number: 1,
        title: "Upload Your Materials",
        description:
          "Drop your PDFs, documents, or notes into QuizBee. Our AI analyzes the content and prepares to create personalized quizzes based on your materials.",
      },
      {
        number: 2,
        title: "Take Adaptive Quizzes",
        description:
          "Start your quiz and adjust difficulty on the fly. Refine topics, change complexity, and learn at your own pace. Each question is generated based on your actual study materials.",
      },
      {
        number: 3,
        title: "Learn with AI Tutoring",
        description:
          "Stuck on a question? Start a conversation with your AI tutor. Get detailed explanations, explore related concepts, and truly understand the material - not just memorize answers.",
      },
      {
        number: 4,
        title: "Grow Over Time",
        description:
          "QuizBee learns from your journey. As you progress, it identifies your weak spots and knowledge gaps, adapting future questions to focus on areas that need improvement. Build lasting mastery through continuous, personalized reinforcement.",
      },
    ],
  },
  useCases: {
    title: "Perfect for Every Learning Goal",
    subtitle: "Use Cases",
    primary: {
      title: "Exam Preparation",
      description:
        "Ace your exams with targeted quizzes based on your course materials. Upload lecture notes, textbooks, and study guides to create comprehensive practice tests that mirror real exam questions.",
      image: "/bee1.svg",
    },
    modules: [
      {
        name: "Medical Students",
        description:
          "Master complex medical concepts with adaptive quizzes from your textbooks and lecture notes.",
        badge: "Popular",
      },
      {
        name: "Law Students",
        description:
          "Practice case law and legal concepts with AI-generated questions from your course materials.",
      },
      {
        name: "Engineering & STEM",
        description:
          "Test your understanding of technical concepts with problem-solving quizzes tailored to your coursework.",
      },
      {
        name: "Business & Finance",
        description:
          "Prepare for certifications and exams with quizzes generated from your study guides and materials.",
      },
      {
        name: "Language Learning",
        description:
          "Build vocabulary and grammar skills through interactive quizzes based on your learning materials.",
        badge: "New",
      },
      {
        name: "Professional Certifications",
        description:
          "Study for professional exams and certifications with custom quizzes from official study materials.",
      },
    ],
    secondary: {
      title: "Continuous Learning",
      description:
        "Keep growing your knowledge with materials from books, articles, courses, and more. Turn any learning resource into an interactive quiz for better retention and understanding.",
      image: "/honey.svg",
    },
  },
  testimonials: {
    title: "Loved by Students Worldwide",
    subtitle: "Success Stories",
    items: [
      {
        text: "QuizBee transformed my study routine! I went from barely passing to getting A's. The AI tutor explains concepts better than my professors, and I can study at 2 AM when I'm most productive.",
        author: "Sarah Mitchell",
        role: "Medical Student, Johns Hopkins",
        rating: 5,
      },
      {
        text: "I used to spend hours creating flashcards. Now I just upload my lecture notes and QuizBee generates perfect quizzes in seconds. The adaptive difficulty keeps me challenged without overwhelming me.",
        author: "Marcus Chen",
        role: "Engineering Student, MIT",
        rating: 5,
      },
      {
        text: "Preparing for the bar exam was terrifying until I found QuizBee. The AI adapts to my weak areas and the conversational tutor helped me understand complex legal concepts. Passed on my first try!",
        author: "Jessica Rodriguez",
        role: "Law Graduate, NYU",
        rating: 5,
      },
      {
        text: "As someone with ADHD, traditional studying never worked for me. QuizBee's interactive approach keeps me engaged, and I can adjust difficulty when I'm struggling. It's been life-changing.",
        author: "David Park",
        role: "Business Student, Stanford",
        rating: 5,
      },
      {
        text: "I'm studying for my CPA exam while working full-time. QuizBee lets me make the most of my limited study time. The progress tracking shows exactly what I need to focus on.",
        author: "Emily Thompson",
        role: "Accountant",
        rating: 5,
      },
      {
        text: "Learning Japanese was impossible until QuizBee. I upload vocabulary lists and get customized quizzes that actually help me remember. The spaced repetition based on my mistakes is genius.",
        author: "Alex Johnson",
        role: "Language Learner",
        rating: 5,
      },
    ],
  },
  pricing: {
    title: "Choose Your Learning Path",
    subtitle: "Flexible Plans",
    plans: [
      {
        name: "Free",
        price: "$0",
        period: "forever",
        description: "Perfect for trying out QuizBee",
        features: [
          "All public quizzes",
          "50 quiz questions per month",
          "1 material upload (up to 10 pages)",
        ],
        buttonText: "Start Free",
      },
      {
        name: "Plus",
        price: "$9.97",
        period: "month",
        description: "For complete quiz creation process",
        features: [
          "Every feature in Free",
          "Up to 1000 quiz questions per month",
          "Unlimited material uploads",
          "Real-time difficulty and topic adjustment",
          "Topic refinement",
          "Priority support",
        ],
        highlighted: false,
        badge: "Most Popular",
        buttonText: "Start Plus Trial",
      },
      {
        name: "Pro",
        price: "$19.97",
        period: "month",
        description: "For complete education process",
        features: [
          "Everything in Plus",
          "Up to 10000 quiz questions per month",
          "Priority queue for quiz creation",
          "AI Tutor with context",
        ],
        buttonText: "Start Pro Trial",
      },
    ],
  },
  faq: {
    title: "Frequently Asked Questions",
    subtitle: "Got Questions?",
    questions: [
      {
        question: "How is QuizBee different from Quizlet or other quiz apps?",
        answer:
          "Unlike traditional flashcard apps, QuizBee uses AI to generate questions directly from YOUR materials - not from pre-made decks. Plus, you get a personal AI tutor that can explain any concept from your materials in real-time. It's like having a study buddy who's read everything you have.",
      },
      {
        question: "What file formats do you support?",
        answer:
          "We support PDF, DOCX, TXT, and more. You can upload lecture notes, textbooks, study guides, articles - pretty much any text-based learning material. Our AI analyzes the content and generates relevant questions.",
      },
      {
        question: "How does the AI tutor work?",
        answer:
          "After each quiz question, you can start a conversation with our AI tutor. It has full context of your study materials and can explain concepts, provide examples, clarify confusing topics, and answer follow-up questions - all based on YOUR specific materials.",
      },
      {
        question: "Can I use QuizBee on my phone?",
        answer:
          "Yes! QuizBee works on any device with a web browser - desktop, tablet, or mobile. Study anywhere, anytime. Your progress syncs across all devices automatically.",
      },
      {
        question: "How does the adaptive difficulty work?",
        answer:
          "You can adjust difficulty mid-quiz if questions are too easy or too hard. Plus, QuizBee learns from your mistakes over time, focusing future quizzes on topics you struggle with. It's personalized learning that grows with you.",
      },
      {
        question: "Is my data secure and private?",
        answer:
          "Absolutely. Your study materials and quiz history are encrypted and private. We never share your data with third parties. You own your content and can delete it anytime.",
      },
      {
        question: "Can I cancel my subscription anytime?",
        answer:
          "Yes! No long-term contracts or commitments. Cancel with one click from your account settings. You'll keep access until the end of your billing period, and we offer a 14-day money-back guarantee.",
      },
      {
        question: "Do you offer student discounts?",
        answer:
          "Yes! Students with a valid .edu email address get 20% off Pro plans. Just sign up with your student email to automatically receive the discount.",
      },
    ],
  },
  cta: {
    headline: "Ready to Transform Your Learning?",
    subheadline:
      "Join 50,000+ students who are studying smarter with AI-powered quizzes. Upload your first material and create a quiz in seconds. No credit card required.",
    buttonText: "Start Free - No Credit Card Required",
  },
};
---

<Root
  title="QuizBee - Learn Smarter with AI-Powered Quizzes"
  description="Transform your study materials into interactive AI-powered quizzes. Adaptive learning, AI tutoring, and progress tracking for students and professionals."
  image="/bee_final.svg"
  active="home"
  headerCtaHref={appUrl}
  structuredData={{
    "@context": "https://schema.org",
    "@type": "WebApplication",
    name: "QuizBee",
    description:
      "AI-powered quiz generation platform that transforms study materials into interactive quizzes",
    applicationCategory: "EducationalApplication",
    offers: {
      "@type": "Offer",
      price: "0",
      priceCurrency: "USD",
    },
    aggregateRating: {
      "@type": "AggregateRating",
      ratingValue: "5",
      ratingCount: "6",
      reviewCount: "6",
    },
  }}
>
  <!-- Hero Section -->
  <Hero
    title={content.hero.title}
    description={content.hero.description}
    buttonText={content.hero.buttonText}
    image={content.hero.image}
    position="right"
    overlay={false}
    href={appUrl}
  />

  <!-- Pain Points Section -->
  <Pains
    title={content.pains.title}
    theme="gradient"
    pains={content.pains.items}
  />

  <!-- Features Section -->
  <Features
    title={content.features.title}
    subtitle={content.features.subtitle}
    theme="default"
    features={content.features.items}
    stats={content.features.stats}
  />

  <!-- How It Works Section -->
  <HowItWorks
    title={content.howItWorks.title}
    subtitle={content.howItWorks.subtitle}
    theme="gradient"
    steps={content.howItWorks.steps}
  />

  <!-- Use Cases / Products Section -->
  <Products
    title={content.useCases.title}
    subtitle={content.useCases.subtitle}
    theme="default"
    oracle={{
      ...content.useCases.primary,
      href: appUrl,
    }}
    modules={content.useCases.modules.map((module: any) => ({
      ...module,
      href: appUrl,
    }))}
    pantheon={{
      ...content.useCases.secondary,
      href: appUrl,
    }}
  />

  <!-- Testimonials Section -->
  <Testimonials
    title={content.testimonials.title}
    subtitle={content.testimonials.subtitle}
    theme="gradient"
    testimonials={content.testimonials.items}
  />

  <!-- Pricing Section -->
  <Pricing
    title={content.pricing.title}
    subtitle={content.pricing.subtitle}
    theme="default"
    plans={content.pricing.plans.map((plan: any) => ({
      ...plan,
      buttonHref: appUrl,
    }))}
  />

  <!-- FAQ Section -->
  <FAQ
    title={content.faq.title}
    subtitle={content.faq.subtitle}
    theme="gradient"
    questions={content.faq.questions}
  />

  <!-- Final CTA Section -->
  <CTA
    headline={content.cta.headline}
    subheadline={content.cta.subheadline}
    buttonText={content.cta.buttonText}
    buttonHref={appUrl}
    theme="gradient"
  />
</Root>
